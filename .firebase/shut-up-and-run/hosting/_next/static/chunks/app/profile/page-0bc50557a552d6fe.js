(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{5511:(e,a,n)=>{"use strict";n.d(a,{V:()=>d});var r=n(5155);n(2115);var l=n(965),t=n(3158),s=n(328),i=n(9434),o=n(285);function d(e){let{className:a,classNames:n,showOutsideDays:d=!0,...c}=e;return(0,r.jsx)(s.hv,{showOutsideDays:d,className:(0,i.cn)("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,o.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,i.cn)((0,o.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...n},components:{IconLeft:e=>{let{className:a,...n}=e;return(0,r.jsx)(l.A,{className:(0,i.cn)("h-4 w-4",a),...n})},IconRight:e=>{let{className:a,...n}=e;return(0,r.jsx)(t.A,{className:(0,i.cn)("h-4 w-4",a),...n})}},...c})}d.displayName="Calendar"},7563:(e,a,n)=>{Promise.resolve().then(n.bind(n,8657))},8657:(e,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>O,dynamic:()=>U});var r=n(5155),l=n(221),t=n(2177),s=n(5594),i=n(285),o=n(7759),d=n(2523),c=n(9409),u=n(2115),h=n(547),x=n(9434);let m=h.bL,g=h.l9,f=u.forwardRef((e,a)=>{let{className:n,align:l="center",sideOffset:t=4,...s}=e;return(0,r.jsx)(h.ZL,{children:(0,r.jsx)(h.UC,{ref:a,align:l,sideOffset:t,className:(0,x.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...s})})});f.displayName=h.UC.displayName;var j=n(1920),p=n(5511),v=n(933),y=n(1950),b=n(7481),w=n(9737),D=n(3343),P=n(4861),C=n(5388),N=n(8816),S=n(831),R=n(6981),k=n(518);let z=u.forwardRef((e,a)=>{let{className:n,...l}=e;return(0,r.jsx)(R.bL,{ref:a,className:(0,x.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...l,children:(0,r.jsx)(R.C1,{className:(0,x.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(k.A,{className:"h-4 w-4"})})})});z.displayName=R.bL.displayName;let V=y.kf.map(e=>e.value);y.lZ.map(e=>e.value);let M=y.TR.map(e=>e.value),_=s.z.object({name:s.z.string().min(2,{message:"Name must be at least 2 characters."}),location:s.z.string().min(2,{message:"Location is required."}),runningLevel:s.z.enum(["beginner","intermediate","advanced"]),trainingPlan:s.z.enum(["5k","10k","half-marathon","marathon","ultra"]),runningDaysPerWeek:s.z.coerce.number().min(3).max(7,{message:"Please select how many days per week you plan to run."}),longRunDay:s.z.enum(M),planStartDate:s.z.string().optional(),raceDate:s.z.string().optional(),weatherUnit:s.z.enum(["C","F"]),newsletterDelivery:s.z.enum(["email","hangouts"]),newsSearchPreferences:s.z.array(s.z.enum(V)).optional()}).refine(e=>{if(e.raceDate&&e.planStartDate){let a=(0,D.H)(e.planStartDate),n=(0,D.H)(e.raceDate);if((0,P.f)(a)&&(0,P.f)(n))return a<n}return!0},{message:"Plan start date must be before the race date.",path:["planStartDate"]});function I(){let{userProfile:e,setUserProfileState:a,loading:n}=(0,v.s)(),s=(0,t.mN)({resolver:(0,l.u)(_),defaultValues:{name:"",location:"",runningLevel:"beginner",trainingPlan:"5k",runningDaysPerWeek:y.ON.runningDaysPerWeek,longRunDay:y.ON.longRunDay,planStartDate:void 0,raceDate:void 0,weatherUnit:"F",newsletterDelivery:"email",newsSearchPreferences:y.ON.newsSearchPreferences||[]}}),h=(0,u.useCallback)((e,a)=>{if(e&&a){let n=y.CY.find(e=>e.value===a);if(n){let a=(0,D.H)(e);if((0,P.f)(a))return(0,C.GP)((0,N.e)(a,7*n.durationWeeks-1),"yyyy-MM-dd")}}},[]),R=s.watch("raceDate"),k=s.watch("trainingPlan");return((0,u.useEffect)(()=>{if(R&&k){let e=h(R,k);e&&s.setValue("planStartDate",e,{shouldValidate:!0})}},[R,k,h,s]),(0,u.useEffect)(()=>{if(!n&&e){let a=e.planStartDate;e.raceDate&&e.trainingPlan&&(a=h(e.raceDate,e.trainingPlan)||e.planStartDate),s.reset({name:e.name||"",location:e.location||"",runningLevel:e.runningLevel,trainingPlan:e.trainingPlan,runningDaysPerWeek:e.runningDaysPerWeek||y.ON.runningDaysPerWeek,longRunDay:e.longRunDay||y.ON.longRunDay,planStartDate:a,raceDate:e.raceDate,weatherUnit:e.weatherUnit,newsletterDelivery:e.newsletterDelivery,newsSearchPreferences:e.newsSearchPreferences||[]})}},[n,e,h,s]),n)?(0,r.jsx)("div",{className:"text-center p-10",children:"Loading profile..."}):(0,r.jsx)(o.lV,{...s,children:(0,r.jsxs)("form",{onSubmit:s.handleSubmit(function(n){let r=n.planStartDate;n.raceDate&&n.trainingPlan?r=h(n.raceDate,n.trainingPlan):n.raceDate||n.planStartDate||(r=(0,C.GP)(new Date,"yyyy-MM-dd")),a({...y.ON,...e,id:e.id||(0,w.A)(),name:n.name,location:n.location,runningLevel:n.runningLevel,trainingPlan:n.trainingPlan,runningDaysPerWeek:n.runningDaysPerWeek,longRunDay:n.longRunDay,planStartDate:r,raceDate:n.raceDate,weatherUnit:n.weatherUnit,newsletterDelivery:n.newsletterDelivery,newsSearchPreferences:n.newsSearchPreferences||[]}),(0,b.oR)({title:"Profile Saved!",description:"Your preferences have been updated."})}),className:"space-y-8",children:[(0,r.jsx)(o.zB,{control:s.control,name:"name",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{children:"Name"}),(0,r.jsx)(o.MJ,{children:(0,r.jsx)(d.p,{placeholder:"Your Name",...a,value:a.value||""})}),(0,r.jsx)(o.Rr,{children:"This is your public display name."}),(0,r.jsx)(o.C5,{})]})}}),(0,r.jsx)(o.zB,{control:s.control,name:"location",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{children:"Location (City)"}),(0,r.jsx)(o.MJ,{children:(0,r.jsx)(d.p,{placeholder:"e.g., Springfield",...a,value:a.value||""})}),(0,r.jsx)(o.Rr,{children:"Used for local weather and potentially geographic news."}),(0,r.jsx)(o.C5,{})]})}}),(0,r.jsx)(o.zB,{control:s.control,name:"runningLevel",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{children:"Running Level"}),(0,r.jsxs)(c.l6,{onValueChange:a.onChange,value:a.value,children:[(0,r.jsx)(o.MJ,{children:(0,r.jsx)(c.bq,{children:(0,r.jsx)(c.yv,{placeholder:"Select your running level"})})}),(0,r.jsx)(c.gC,{children:y.Ii.map(e=>(0,r.jsx)(c.eb,{value:e.value,children:e.label},e.value))})]}),(0,r.jsx)(o.C5,{})]})}}),(0,r.jsx)(o.zB,{control:s.control,name:"trainingPlan",render:a=>{let{field:n}=a;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{children:"Training Plan"}),(0,r.jsxs)(c.l6,{onValueChange:a=>{n.onChange(a);let r=s.getValues("raceDate");if(r&&a){let e=h(r,a);e&&s.setValue("planStartDate",e,{shouldValidate:!0})}else r||s.getValues("planStartDate")&&(!e||e.trainingPlan===a)||s.setValue("planStartDate",(0,C.GP)(new Date,"yyyy-MM-dd"),{shouldValidate:!0})},value:n.value,children:[(0,r.jsx)(o.MJ,{children:(0,r.jsx)(c.bq,{children:(0,r.jsx)(c.yv,{placeholder:"Select a training plan"})})}),(0,r.jsx)(c.gC,{children:y.CY.map(e=>(0,r.jsxs)(c.eb,{value:e.value,children:[e.label," (",e.durationWeeks," weeks)"]},e.value))})]}),(0,r.jsx)(o.Rr,{children:"Choose a plan. Selecting a race date below will adjust the plan's start date."}),(0,r.jsx)(o.C5,{})]})}}),(0,r.jsx)(o.zB,{control:s.control,name:"runningDaysPerWeek",render:e=>{var a;let{field:n}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{children:"Running Days Per Week"}),(0,r.jsxs)(c.l6,{onValueChange:e=>n.onChange(parseInt(e)),value:null===(a=n.value)||void 0===a?void 0:a.toString(),children:[(0,r.jsx)(o.MJ,{children:(0,r.jsx)(c.bq,{children:(0,r.jsx)(c.yv,{placeholder:"Select number of running days"})})}),(0,r.jsx)(c.gC,{children:y.lZ.map(e=>(0,r.jsx)(c.eb,{value:e.value.toString(),children:e.label},e.value))})]}),(0,r.jsx)(o.Rr,{children:"How many days you want to run each week."}),(0,r.jsx)(o.C5,{})]})}}),(0,r.jsx)(o.zB,{control:s.control,name:"longRunDay",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{children:"Preferred Long Run Day"}),(0,r.jsxs)(c.l6,{onValueChange:a.onChange,value:a.value,children:[(0,r.jsx)(o.MJ,{children:(0,r.jsx)(c.bq,{children:(0,r.jsx)(c.yv,{placeholder:"Select preferred long run day"})})}),(0,r.jsx)(c.gC,{children:y.TR.map(e=>(0,r.jsx)(c.eb,{value:e.value,children:e.label},e.value))})]}),(0,r.jsx)(o.Rr,{children:"The day of the week you prefer for your longest run."}),(0,r.jsx)(o.C5,{})]})}}),(0,r.jsx)(o.zB,{control:s.control,name:"raceDate",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{className:"flex flex-col",children:[(0,r.jsx)(o.lR,{children:"Target Race Date (Optional)"}),(0,r.jsxs)(m,{children:[(0,r.jsx)(g,{asChild:!0,children:(0,r.jsx)(o.MJ,{children:(0,r.jsxs)(i.$,{variant:"outline",className:(0,x.cn)("w-full pl-3 text-left font-normal",!a.value&&"text-muted-foreground"),children:[a.value&&(0,P.f)((0,D.H)(a.value))?(0,C.GP)((0,D.H)(a.value),"PPP"):(0,r.jsx)("span",{children:"Pick a race date"}),(0,r.jsx)(j.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,r.jsx)(f,{className:"w-auto p-0",align:"start",children:(0,r.jsx)(p.V,{mode:"single",selected:a.value&&(0,P.f)((0,D.H)(a.value))?(0,D.H)(a.value):void 0,onSelect:e=>{let n=e?(0,C.GP)(e,"yyyy-MM-dd"):void 0;a.onChange(n);let r=s.getValues("trainingPlan");if(n&&r){let e=h(n,r);e&&s.setValue("planStartDate",e,{shouldValidate:!0})}else if(!n){let e=s.getValues("planStartDate");s.setValue("planStartDate",e||(0,C.GP)(new Date,"yyyy-MM-dd"),{shouldValidate:!0})}},disabled:e=>e<(0,S.f)(new Date,-1),initialFocus:!0})})]}),(0,r.jsx)(o.Rr,{children:"If you set a race date, the plan start date will be calculated."}),(0,r.jsx)(o.C5,{})]})}}),(0,r.jsx)(o.zB,{control:s.control,name:"planStartDate",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{className:"flex flex-col",children:[(0,r.jsx)(o.lR,{children:"Plan Start Date"}),(0,r.jsxs)(m,{children:[(0,r.jsx)(g,{asChild:!0,children:(0,r.jsx)(o.MJ,{children:(0,r.jsxs)(i.$,{variant:"outline",className:(0,x.cn)("w-full pl-3 text-left font-normal",!a.value&&"text-muted-foreground",!!R&&"bg-muted/50 cursor-not-allowed"),disabled:!!R,children:[a.value&&(0,P.f)((0,D.H)(a.value))?(0,C.GP)((0,D.H)(a.value),"PPP"):(0,r.jsx)("span",{children:"Pick a start date"}),(0,r.jsx)(j.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,r.jsx)(f,{className:"w-auto p-0",align:"start",children:(0,r.jsx)(p.V,{mode:"single",selected:a.value&&(0,P.f)((0,D.H)(a.value))?(0,D.H)(a.value):void 0,onSelect:e=>{R||a.onChange(e?(0,C.GP)(e,"yyyy-MM-dd"):void 0)},disabled:e=>!!R||e<(0,S.f)(new Date,-365),initialFocus:!0})})]}),(0,r.jsx)(o.Rr,{children:R?"Automatically calculated based on your race date and plan duration.":"Select when your training plan should begin. If not set, defaults to today upon saving."}),(0,r.jsx)(o.C5,{})]})}}),(0,r.jsx)(o.zB,{control:s.control,name:"weatherUnit",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{children:"Weather Unit"}),(0,r.jsxs)(c.l6,{onValueChange:a.onChange,value:a.value,children:[(0,r.jsx)(o.MJ,{children:(0,r.jsx)(c.bq,{children:(0,r.jsx)(c.yv,{placeholder:"Select weather unit"})})}),(0,r.jsx)(c.gC,{children:y.n2.map(e=>(0,r.jsx)(c.eb,{value:e.value,children:e.label},e.value))})]}),(0,r.jsx)(o.Rr,{children:"Choose how temperature is displayed."}),(0,r.jsx)(o.C5,{})]})}}),(0,r.jsx)(o.zB,{control:s.control,name:"newsletterDelivery",render:e=>{let{field:a}=e;return(0,r.jsxs)(o.eI,{children:[(0,r.jsx)(o.lR,{children:"Newsletter Delivery"}),(0,r.jsxs)(c.l6,{onValueChange:a.onChange,value:a.value,children:[(0,r.jsx)(o.MJ,{children:(0,r.jsx)(c.bq,{children:(0,r.jsx)(c.yv,{placeholder:"Select delivery method"})})}),(0,r.jsx)(c.gC,{children:y.Ye.map(e=>(0,r.jsx)(c.eb,{value:e.value,children:e.label},e.value))})]}),(0,r.jsx)(o.Rr,{children:"How you'd like to receive your newsletter."}),(0,r.jsx)(o.C5,{})]})}}),(0,r.jsx)(o.zB,{control:s.control,name:"newsSearchPreferences",render:()=>(0,r.jsxs)(o.eI,{children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)(o.lR,{className:"text-base",children:"News Search Preferences"}),(0,r.jsx)(o.Rr,{children:"Select topics you're interested in for your news feed."})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:y.kf.map(e=>(0,r.jsx)(o.zB,{control:s.control,name:"newsSearchPreferences",render:a=>{var n;let{field:l}=a;return(0,r.jsxs)(o.eI,{className:"flex flex-row items-center space-x-3 space-y-0 p-2 border rounded-md hover:bg-muted/50",children:[(0,r.jsx)(o.MJ,{children:(0,r.jsx)(z,{checked:null===(n=l.value)||void 0===n?void 0:n.includes(e.value),onCheckedChange:a=>a?l.onChange([...l.value||[],e.value]):l.onChange((l.value||[]).filter(a=>a!==e.value))})}),(0,r.jsx)(o.lR,{className:"font-normal cursor-pointer flex-1",children:e.label})]},e.value)}},e.value))}),(0,r.jsx)(o.C5,{})]})}),(0,r.jsx)(i.$,{type:"submit",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:"Save Preferences"})]})})}var L=n(8778),B=n(6695),W=n(283),H=n(5695);function O(){let{logout:e}=(0,W.A)(),a=(0,H.useRouter)(),n=async()=>{try{await e(),a.push("/")}catch(e){console.error("Error logging out:",e)}};return(0,r.jsx)(L.O,{children:(0,r.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,r.jsxs)(B.Zp,{className:"shadow-lg",children:[(0,r.jsxs)(B.aR,{children:[(0,r.jsx)(B.ZB,{className:"text-3xl font-bold",children:"Your Profile & Preferences"}),(0,r.jsx)(B.BT,{children:"Keep your information up to date to get the most out of Shut Up and Run."})]}),(0,r.jsxs)(B.Wu,{children:[(0,r.jsx)(I,{}),(0,r.jsx)("div",{className:"mt-6 pt-6 border-t",children:(0,r.jsx)(i.$,{variant:"destructive",onClick:n,className:"w-full",children:"Logout"})})]})]})})})}let U="force-dynamic"}},e=>{var a=a=>e(e.s=a);e.O(0,[992,965,845,442,244,234,188,48,9,556,380,542,441,684,358],()=>a(7563)),_N_E=e.O()}]);